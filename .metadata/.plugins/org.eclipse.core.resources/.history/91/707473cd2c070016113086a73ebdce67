/*
 *
 *  Created on: Apr 20, 2016
 *      Author: Deepak K. Gupta
 *  
 */


#include <atop/TopologyOptimization/designField.h>

using namespace atop;

DesignField::DesignField(){

}


DesignField::DesignField(
		unsigned int dim,
		unsigned int no_points,
		unsigned int design_rule,
		double volfrac){

	//no_points defines the number of points to be put inside the element
	//design_rule defines the rule for distributing/adding points in the domain
	//At every p-refinement, the new design points should not disturb the position of previous points.
	this->dim = dim;
	this->design_rule = design_rule;
	initialize_field(no_points, dim, volfrac);

}

void DesignField::initialize_field(unsigned int no_points,
		unsigned int dim,
		double volfrac){

	//assigning the no. of points for the density and point vectors
	rho.resize(no_points, volfrac);
	pointX.resize(no_points);
	for(unsigned int i = 0; i < pointX.size(); ++i){
		pointX[i].resize(dim);
	}

	//for manually assigning the points
	if (design_rule == 1){
		update_field_manual(0);
	}
}

//This version is called only during initialization, overloaded forms will follow in future
void DesignField::update_field_manual(unsigned int ctr){
	pointX.resize(no_points);

}
