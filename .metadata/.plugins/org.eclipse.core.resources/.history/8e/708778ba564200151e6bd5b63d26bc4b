/*
 *
 *  Created on: Aug 13, 2015
 *      Author: Deepak K. Gupta
 *  
 */

#include <atop/derivatives/sensitivity.h>

using namespace dealii;
using namespace atop;

template <int dim>
void SensitivityAnalysis<dim>::SensitivityAnalysis(
		std::string& str){
	this->problem_name = str;
}

template <int dim>
void SensitivityAnalysis<dim>::set_input(
		DoFHandler<dim> &obj_dof_handler,
		std::vector<CellInfo> &obj_cell_info_vector,
		std::vector<CellInfo> &obj_density_cell_info_vector,
		FESystem<dim> &obj_fe,
		ElasticData &obj_elastic_data,
		FEM<dim> &obj_fem
		){

	//Setting the dof_handler object
	this->dof_handler = &obj_dof_handler;
	this->cell_info_vector = &obj_cell_info_vector;
	this->density_cell_info_vector = &obj_density_cell_info_vector;
	this->fe = &obj_fe;
	this->elastic_data = &obj_elastic_data;
	this->fem = &obj_fem;
}

template <int dim>
void SensitivityAnalysis<dim>::run(
		double &obj,
		std::vector<double> &obj_grad){
	if (problem_name == "minimum_compliance"){
		Compliance<dim> obj_compliance;
		obj_compliance.set_input();
		obj_compliance.compute(obj, obj_grad);
	}
}



