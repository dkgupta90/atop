/*
 *
 *  Created on: Aug 16, 2015
 *      Author: Deepak K. Gupta
 *  
 */

#include <atop/TopologyOptimization/constraints/general.h>

using namespace atop;

double GeneralConstraints::volumeConstraint(
		std::vector<double> &volume_grad_vector,
		std::vector<CellInfo> &cell_info_vector,
		std::vector<CellInfo> &density_cell_info_vector
		){

	unsigned int no_design = density_cell_info_vector.size();
	volume_grad_vector.resize(no_design, 0.0);

	//Calculating the total material volume fraction
	double volume = 0.0;
	for(unsigned int i = 0; i < cell_info_vector.size(); ++i){
		double area_fraction = cell_info_vector[i].cell_area / cell_info_vector[i].
		volume += (cell_info_vector[i].cell_density;
	}
	volume /= no_design;
	std::cout<<"Volume fraction: "<<volume<<std::endl;

	//Calculating the first order gradient of volume constraint
	for(unsigned int i = 0; i < no_design; ++i){

	}
}
